#include <WiFi.h>
#include <WebServer.h>

// WiFi credentials
const char* ssid = "YOUR_WIFI_NAME";
const char* password = "YOUR_WIFI_PASSWORD";

// LED pins
#define LED1 26
#define LED2 27

WebServer server(80);

// HTML Page
String webpage() {
  return R"rawliteral(
    <!DOCTYPE html>
    <html>
    <head>
      <title>ESP32 LED Control</title>
      <style>
        body { font-family: Arial; text-align: center; }
        button { padding: 15px; margin: 10px; font-size: 18px; }
      </style>
    </head>
    <body>
      <h2>ESP32 Local Web Server</h2>
      <h3>LED 1</h3>
      <a href="/led1on"><button>ON</button></a>
      <a href="/led1off"><button>OFF</button></a>

      <h3>LED 2</h3>
      <a href="/led2on"><button>ON</button></a>
      <a href="/led2off"><button>OFF</button></a>
    </body>
    </html>
  )rawliteral";
}

void setup() {
  Serial.begin(115200);

  pinMode(LED1, OUTPUT);
  pinMode(LED2, OUTPUT);

  WiFi.begin(ssid, password);
  Serial.print("Connecting to WiFi");

  while (WiFi.status() != WL_CONNECTED) {
    delay(500);
    Serial.print(".");
  }

  Serial.println("\nWiFi connected!");
  Serial.print("IP Address: ");
  Serial.println(WiFi.localIP());

  server.on("/", []() {
    server.send(200, "text/html", webpage());
  });

  server.on("/led1on", []() {
    digitalWrite(LED1, HIGH);
    server.send(200, "text/html", webpage());
  });

  server.on("/led1off", []() {
    digitalWrite(LED1, LOW);
    server.send(200, "text/html", webpage());
  });

  server.on("/led2on", []() {
    digitalWrite(LED2, HIGH);
    server.send(200, "text/html", webpage());
  });

  server.on("/led2off", []() {
    digitalWrite(LED2, LOW);
    server.send(200, "text/html", webpage());
  });

  server.begin();
}

void loop() {
  server.handleClient();
}
